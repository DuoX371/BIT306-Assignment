<div class="d-flex justify-content-sm-center" *ngIf="loading"><mat-spinner></mat-spinner></div>
<div *ngIf="!loading">
<div *ngIf="!offers.length">
  <h1 *ngIf="dataInput.status !== 'CLOSED'">There are currently no offers for this request.</h1>
  <h1 *ngIf="dataInput.status === 'CLOSED'">This request is now closed.</h1>
  <div class="text-center">
    <img src="../../../../assets/images/afk.png" class="img-fluid" style="max-width: 70% !important;">
  </div>

  <div class="text-center mt-4">
    <button mat-raised-button color="primary" type="button" (click)="closeRequest()" *ngIf="dataInput.status !== 'CLOSED'">Close Request</button>
    <button mat-raised-button color="primary" type="button" disabled *ngIf="dataInput.status === 'CLOSED'">Closed</button>
    <button mat-raised-button color="accent" type="button" class="ms-2" mat-dialog-close>Close</button>
  </div>
</div>
<div *ngIf="offers.length">
  <h1 *ngIf="dataInput.status === 'CLOSED'">This request is now closed.</h1>
  <h2>Please select an offer to approve</h2>
  <table mat-table [dataSource]="offers" class="w-100 mat-elevation-z8 text-center">
    <!-- Define headers -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <!-- Define the datas -->
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="clickedRow(row)"></tr>
    <!-- ID -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> ID </th>
      <td mat-cell *matCellDef="let offer"> {{offer._id}} </td>
    </ng-container>

    <!-- Remarks -->
    <ng-container matColumnDef="remarks">
      <th mat-header-cell *matHeaderCellDef> Remarks </th>
      <td mat-cell *matCellDef="let offer"> {{offer.remarks}} </td>
    </ng-container>

    <!-- Status -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let offer" [ngClass]="offer.status == 'APPROVED' ? 'text-success fw-bold' : 'text-warning fw-bold'"> {{offer.status}} </td>
    </ng-container>

    <!-- Volunteer -->
    <ng-container matColumnDef="volunteer">
      <th mat-header-cell *matHeaderCellDef> Volunteer </th>
      <td mat-cell *matCellDef="let offer"> {{offer.volunteer}} </td>
    </ng-container>

    <!-- Age -->
    <ng-container matColumnDef="age">
      <th mat-header-cell *matHeaderCellDef> Age </th>
      <td mat-cell *matCellDef="let offer"> {{offer.age}} </td>
    </ng-container>

    <!-- Occupation -->
    <ng-container matColumnDef="occupation">
      <th mat-header-cell *matHeaderCellDef> Occupation </th>
      <td mat-cell *matCellDef="let offer"> {{offer.occupation}} </td>
    </ng-container>

  </table>

  <div class="text-center mt-4">
    <button mat-raised-button color="primary" type="button" (click)="closeRequest()" *ngIf="dataInput.status !== 'CLOSED'">Close Request</button>
    <button mat-raised-button color="primary" type="button" disabled *ngIf="dataInput.status === 'CLOSED'">Closed</button>
    <button mat-raised-button color="accent" type="button" class="ms-2" mat-dialog-close>Close</button>
  </div>

</div>
</div>
